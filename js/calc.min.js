const price=[{id:1,name:"Эндопротезирование молочных желез любой доступ (две стороны) без стоимости имплантатов",cost:276e3},{id:2,name:"Эндопротезирование молочных желез при тубулярной деформации груди (две стороны) без стоимости имплантатов",cost:3e5},{id:3,name:"Повторная маммопластика с заменой имплантатов (две стороны) без стоимости имплантатов",cost:278900},{id:4,name:"Эндопротезирование молочных желез с применением эндоскопической техники (две стороны) без стоимости имплантатов",cost:333e3},{id:5,name:"Эндопротезование молочных желез с одномоментной коррекцией птоза (две стороны) без стоимости имплантатов",cost:276e3},{id:6,name:"Мастопексия (коррекция птоза) без использования имплантатов (две стороны)",cost:265e3},{id:7,name:"Редукционная маммопластика 2 стороны (уменьшение груди)",cost:297e3},{id:8,name:"Редукционная маммопластика 2 стороны при гигантомастии (уменьшение груди)",cost:329e3},{id:9,name:"Введение собственного жира с целью коррекции контуров молочных желез (3 зоны липофилинга)",cost:156e3},{id:10,name:"Введение собственного жира с целью увеличения объема молочных желез (5 зон липофилинга)",cost:26e4},{id:11,name:"Коррекция ареолы (1 сторона)",cost:47e3},{id:12,name:"Коррекция ареолы (2 стороны)",cost:56e3},{id:13,name:"Пластика втянутых сосков (2 стороны)",cost:27e3},{id:14,name:"Пластика втянутых сосков (1 сторона)",cost:21e3},{id:15,name:"Редукция соска (2 стороны)",cost:24e3},{id:16,name:"Редукция соска (1 сторона)",cost:2e4},{id:17,name:"Радикальная мастэктомия по Маддену",cost:9e4},{id:18,name:"Радикальная резекция молочной железы",cost:1e5},{id:19,name:"Радикальная подкожная мастэктомия с одномоментной установкой силиконового эндопротеза (без стоимости эндопротеза)",cost:149e3},{id:20,name:"Радикальная кожесохранная мастэктомия с одномоментной установкой силиконового эндопротеза (без стоимости эндопротеза)",cost:149e3},{id:21,name:"Секторальная резекция молочной железы 1 к.с",cost:2e4},{id:22,name:"Секторальная резекция молочной железы 2 к.с",cost:3e4},{id:23,name:"Биопсия сигнального лимфоузла",cost:0},{id:24,name:"Резекция молочной железы с БСЛУ",cost:159e3},{id:25,name:"Подкожная мастэктомия с БСЛУ с одномоментной установкой силиконового эндопротеза (без стоимости эндопротеза)",cost:2e5},{id:26,name:"Удаление липомы",cost:2e4},{id:27,name:"Отсроченная микрохирургическая пластика (все виды) Отсроченная микрохирургическая реконструкция груди свободным абдоминальным трансплантатом (DIEAP) с использованием микрохирургической техники (1 сторона)",cost:535e3},{id:28,name:"Отсроченная реконструкция молочной железы с установкой эспандера (1 сторона) без стоимости эспандера",cost:89e3},{id:29,name:"Отсроченная реконструкция молочной железы ТДЛ-лоскутом с одномоментной установкой эспандера (1 сторона) без стоимости эспандера",cost:209e3},{id:30,name:"Отсроченная реконструкция молочной железы (2 этап) замена эспандера на постоянный имплантат (1 сторона) без стоимости имплантата",cost:119e3},{id:31,name:"Реконструкция соска местными тканями (1 сторона)",cost:55e3},{id:32,name:"Эндопротезование молочных желез с одномоментной коррекцией птоза периареолярным доступом (одна сторона) без стоимости имплантатов",cost:129e3},{id:33,name:"Эндопротезование молочных желез с одномоментной коррекцией птоза вертикальным доступом (одна сторона) без стоимости имплантатов",cost:129e3},{id:34,name:"Эндопротезование молочных желез с одномоментной коррекцией птоза Т-инвертированным доступом (одна сторона) без стоимости имплантатов",cost:149e3},{id:35,name:"Резекция молочной железы субтотальная с одномоментным эндопротезированием (1 сторона) (без стоимости имплантатов)",cost:139e3},{id:36,name:"Резекция молочной железы субтотальная с одномоментным эндопротезированием (2 стороны) (без стоимости имплантатов)",cost:22e4},{id:37,name:"Редукционная маммопластика (уменьшение груди) при гигантомастии (1 сторона)",cost:169e3},{id:38,name:"Редукционная маммопластика (уменьшение груди), (1 сторона)",cost:139e3},{id:39,name:"Мастопексия без имплантов (1 сторона)",cost:129e3},{id:40,name:"Удаление имплантатов (1 сторона)",cost:6e4},{id:41,name:"Удаление имплантатов (2 стороны)",cost:11e4},{id:42,name:"Миниабдоминопластика",cost:172e3},{id:43,name:"Абдоминопластика, 1 к.с",cost:279e3},{id:44,name:"Абдоминопластика, 2 к.с",cost:333e3},{id:45,name:"Пластика пупочной грыжи",cost:4e4},{id:46,name:"Пластика грыжи белой линии живота",cost:6e4},{id:47,name:"Пластика плеч",cost:266e3},{id:48,name:"Пластика бедер",cost:306e3},{id:49,name:"Коррекция малых половых губ ",cost:5e4},{id:50,name:"Липоаспирация (1 зона)",cost:32e3},{id:51,name:"Липофилинг (1 зона)",cost:51e3},{id:52,name:"Коррекция рубца 1 к.с.",cost:38e3},{id:53,name:"Коррекция рубца 2 к.с.",cost:78e3},{id:54,name:"Коррекция гинекомастии (2 стороны) – 1 категория сложности",cost:92e3},{id:55,name:"Коррекция гинекомастии (2 стороны) – 2 категория сложности",cost:159e3}],additional=[{id:56,name:"30 минут наркоза",cost:4e3},{id:57,name:"Анатомические импланты (2 шт)",cost:95e3},{id:58,name:"Анатомический имплант (1 шт)",cost:47500},{id:59,name:"Гистологическое исследование",cost:1600},{id:60,name:"Дневной стационар, 3 часа",cost:1500},{id:61,name:"Компрессионное бельё",cost:5e3},{id:62,name:"Чулки",cost:2e3},{id:63,name:"Топ",cost:5e3},{id:64,name:"Бандаж",cost:7700},{id:65,name:"Рукава",cost:3950},{id:66,name:"Штаны (Капри, бриджи)",cost:5750},{id:67,name:"Боди",cost:8300},{id:68,name:"Комбинезон",cost:13800},{id:69,name:"Круглые импланты (2 шт)",cost:7e4},{id:70,name:"Круглый имплант (1 шт)",cost:35e3},{id:71,name:"Местная анестезия",cost:1200},{id:72,name:"Экспандер груди (1 шт)",cost:41600},{id:73,name:"Ягодичные импланты (2 шт)",cost:6e4},{id:74,name:"Ягодичный имплант (1 шт)",cost:3e4}],resultOperation=[],resultAdditional=[],priceCLone=Array.from(price),additionalCLone=Array.from(additional),inputOperations=document.querySelector(".input_operations"),inputAdditional=document.querySelector(".input_additional"),operationsList=document.querySelector(".operations_list"),additionalList=document.querySelector(".additional_list"),operationsListContainer=document.querySelector(".select.operations"),additionalListContainer=document.querySelector(".select.additional"),selectedOperationContainer=document.querySelector(".selected_operations-container"),selectedAdditionalContainer=document.querySelector(".selected_additional-container"),containerOperation=document.querySelector(".container_operation"),containerAddtitonal=document.querySelector(".container_additional"),narcosisTimeEl=document.querySelector(".narcosis_time"),inclinicTimeEL=document.querySelector(".inclinic_time"),onedayCheckboxEL=document.querySelector(".inputoneday_checkbox"),narcosisFirsthourEL=document.querySelector(".narcosis_firsthour"),narcosisNexthoursEL=document.querySelector(".narcosis_nexthours");let narcosisTime=narcosisTimeEl.value,inclinicTime=inclinicTimeEL.value,onedayCheckbox=onedayCheckboxEL.checked,narcosisFirsthour=narcosisFirsthourEL.value,narcosisNexthours=narcosisNexthoursEL.value;const textArea=document.querySelector("textarea");let formatter=new Intl.NumberFormat("ru");function changeToHTML(e,t){return 0===e.length?"<div class='list_item-default'>Ничего не найдено</div>":e.map(e=>`<div item_id='${e.id}'class='list_item ${"operation"==t?"operation_item":"additional_item"}'>${e.name}</div>`).join("")}function newAction(){const e=narcosisTime>60?Math.floor(+narcosisFirsthour+(narcosisTime-60)/60*+narcosisNexthours):Math.floor(narcosisTime/60*narcosisFirsthour),t=inclinicTime>0?`\nПребывание в клинике ${inclinicTime} дн. — ${formatter.format(8e3*inclinicTime)}₽`:"",i=narcosisTime>0?`\nНаркоз ${Math.floor(narcosisTime/60)} ч. ${Math.round(narcosisTime%60)} мин. — ${formatter.format(e)}₽`:"",n=""+(onedayCheckbox?"\nЗаезд за день до операции + массаж — 8 000₽":""),o=resultOperation.map(e=>`${e.name} — ${formatter.format(e.cost)}₽\n`).join("")+i+n+t+"\n\n"+resultAdditional.map(e=>`${e.name} — ${formatter.format(e.cost)}₽\n`).join("");textArea.innerHTML=o+"\n\nИтого: "+formatter.format([...resultOperation,...resultAdditional].reduce((e,t)=>e+t.cost,0)+e+8e3*inclinicTime+(onedayCheckbox?8e3:0))+"₽"}function closeItem(e,t){selectedReturnOperationId=e.getAttribute("item_id"),e.remove(),t?(price.splice(selectedReturnOperationId-1,0,priceCLone[selectedReturnOperationId-1]),resultOperation.splice(resultOperation.findIndex(e=>e.id==selectedReturnOperationId),1),operationsList.innerHTML=changeToHTML(price,"operation")):(additional.splice(additionalCLone.findIndex(e=>e.id==selectedReturnOperationId),0,additionalCLone[additionalCLone.findIndex(e=>e.id==selectedReturnOperationId)]),resultAdditional.splice(resultAdditional.findIndex(e=>e.id==selectedReturnOperationId),1),additionalList.innerHTML=changeToHTML(additional,"additional")),newAction()}function addItem(e,t,i){return`<div item_id='${t}' class='selected_operation'>\n      <p>${i}</p>\n      <button class=${e?"close_operation":"close_additional"}>\n      </button >\n   </div>`}operationsList.innerHTML=changeToHTML(price,"operation"),additionalList.innerHTML=changeToHTML(additional,"additional"),inputOperations.addEventListener("input",(function(){const e=price.filter(e=>e.name.toLowerCase().indexOf(inputOperations.value.toLowerCase())>-1);if(0===e.length)operationsList.innerHTML="<div class='list_item-default'>Ничего не найдено</div>";else{const t=changeToHTML(e,"operation");operationsList.innerHTML=t}})),inputAdditional.addEventListener("input",(function(){const e=additional.filter(e=>e.name.toLowerCase().indexOf(inputAdditional.value.toLowerCase())>-1);if(0===e.length)additionalList.innerHTML="<div class='list_item-default'>Ничего не найдено</div>";else{const t=changeToHTML(e,"additional");additionalList.innerHTML=t}})),narcosisTimeEl.addEventListener("input",(function(){narcosisTime=narcosisTimeEl.value,newAction()})),onedayCheckboxEL.addEventListener("input",(function(){onedayCheckbox=onedayCheckboxEL.checked,newAction()})),narcosisFirsthourEL.addEventListener("input",(function(){narcosisFirsthour=narcosisFirsthourEL.value,newAction()})),narcosisNexthoursEL.addEventListener("input",(function(){narcosisNexthours=narcosisNexthoursEL.value,newAction()})),inclinicTimeEL.addEventListener("input",(function(){inclinicTime=inclinicTimeEL.value,newAction()})),document.addEventListener("click",(function(e){if(containerOperation.contains(e.target)?(operationsList.classList.add("active"),operationsListContainer.classList.add("focus")):(operationsList.classList.remove("active"),operationsListContainer.classList.remove("focus")),containerAddtitonal.contains(e.target)?(additionalList.classList.add("active"),additionalListContainer.classList.add("focus")):(additionalList.classList.remove("active"),additionalListContainer.classList.remove("focus")),"list_item operation_item"==e.target.classList.value){const t=e.target.getAttribute("item_id");selectedOperationContainer.innerHTML=addItem(!0,t,e.target.textContent)+selectedOperationContainer.innerHTML,resultOperation.push({id:e.target.getAttribute("item_id"),name:e.target.textContent,cost:price[t-1].cost}),price.splice(price.findIndex(e=>e.id==t),1),operationsList.innerHTML=changeToHTML(price,"operation"),newAction(),inputOperations.value=""}if("list_item additional_item"==e.target.classList.value){let t=e.target.getAttribute("item_id");selectedAdditionalContainer.innerHTML=addItem(!1,t,e.target.textContent)+selectedAdditionalContainer.innerHTML;const i=additional.findIndex(e=>e.id==t);resultAdditional.push({id:e.target.getAttribute("item_id"),name:e.target.textContent,cost:additional[i].cost}),additional.splice(additional.findIndex(e=>e.id==t),1),additionalList.innerHTML=changeToHTML(additional,"additional"),newAction(),inputAdditional.value=""}"close_operation"===e.target.classList.value&&closeItem(e.target.parentNode,!0),"close_additional"===e.target.classList.value&&closeItem(e.target.parentNode,!1)}));